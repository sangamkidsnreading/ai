# 키리보카 사용자 인증 시스템 설계

## 1. 요구사항 분석

### 1.1 기본 요구사항
- **회원가입**: 새로운 사용자 계정 생성
- **로그인**: 기존 사용자 인증
- **로그아웃**: 세션 종료
- **사용자 프로필 관리**: 개인정보 수정
- **관리자 페이지**: 사용자 및 콘텐츠 관리

### 1.2 사용자 역할 (Role-based Access)
- **일반 사용자 (Student)**: 학습 기능 이용
- **관리자 (Admin)**: 전체 시스템 관리

### 1.3 데이터 저장 방식
- **로컬 스토리지 기반**: 간단한 구현을 위해 브라우저 로컬 스토리지 활용
- **사용자별 데이터 분리**: 각 사용자의 학습 데이터 독립 관리

## 2. 시스템 아키텍처

### 2.1 인증 플로우
```
1. 첫 방문 → 로그인/회원가입 페이지
2. 회원가입 → 사용자 정보 저장 → 자동 로그인
3. 로그인 → 인증 확인 → 메인 앱 접근
4. 로그아웃 → 세션 클리어 → 로그인 페이지
```

### 2.2 데이터 구조
```typescript
interface User {
  id: string;
  email: string;
  password: string; // 해시화된 비밀번호
  name: string;
  role: 'student' | 'admin';
  avatar: string;
  createdAt: string;
  lastLoginAt: string;
}

interface UserSession {
  userId: string;
  email: string;
  name: string;
  role: 'student' | 'admin';
  isAuthenticated: boolean;
}
```

### 2.3 권한 관리
- **Public Routes**: 로그인, 회원가입
- **Protected Routes**: 학습 페이지, 대시보드, 프로필
- **Admin Routes**: 관리자 페이지

## 3. 페이지 구조

### 3.1 인증 관련 페이지
- `/login` - 로그인 페이지
- `/register` - 회원가입 페이지
- `/` - 메인 학습 페이지 (인증 필요)
- `/dashboard` - 대시보드 (인증 필요)
- `/profile` - 프로필 (인증 필요)
- `/admin` - 관리자 페이지 (관리자 권한 필요)

### 3.2 관리자 페이지 기능
- **사용자 관리**
  - 전체 사용자 목록 조회
  - 사용자 상세 정보 확인
  - 사용자 학습 통계 조회
  - 사용자 계정 활성화/비활성화

- **콘텐츠 관리**
  - 단어/문장 추가, 수정, 삭제
  - 레벨별 콘텐츠 관리
  - 학습 통계 분석

- **시스템 관리**
  - 전체 학습 통계
  - 사용자 활동 로그
  - 시스템 설정

## 4. 보안 고려사항

### 4.1 비밀번호 보안
- 클라이언트 사이드에서 해시화 (bcrypt 또는 crypto API)
- 최소 8자 이상, 영문+숫자+특수문자 조합

### 4.2 세션 관리
- 로그인 상태를 로컬 스토리지에 저장
- 페이지 새로고침 시 세션 유지
- 로그아웃 시 모든 세션 데이터 클리어

### 4.3 권한 검증
- 각 페이지 접근 시 권한 확인
- 관리자 페이지는 admin 역할만 접근 가능
- 미인증 사용자는 로그인 페이지로 리다이렉트

## 5. UI/UX 설계

### 5.1 로그인/회원가입 페이지
- **모던한 디자인**: 기존 앱과 일관된 디자인
- **폼 검증**: 실시간 입력 검증 및 에러 메시지
- **소셜 로그인 스타일**: 미래 확장을 위한 디자인 고려

### 5.2 관리자 페이지
- **대시보드 스타일**: 차트와 통계 중심
- **테이블 뷰**: 사용자 목록, 콘텐츠 목록
- **모달 창**: 상세 정보 확인 및 편집

## 6. 구현 계획

### Phase 1: 기본 인증 시스템
1. 사용자 스토어 확장 (인증 상태 관리)
2. 로그인/회원가입 페이지 개발
3. 라우팅 가드 구현

### Phase 2: 관리자 기능
1. 관리자 페이지 레이아웃
2. 사용자 관리 기능
3. 콘텐츠 관리 기능

### Phase 3: 보안 및 최적화
1. 권한 기반 라우팅
2. 데이터 검증 강화
3. 사용자 경험 개선

## 7. 기술 스택

### 추가 라이브러리
- **bcryptjs**: 비밀번호 해시화
- **react-hook-form**: 폼 관리
- **yup**: 스키마 검증
- **react-table**: 관리자 페이지 테이블

### 기존 스택 활용
- **Zustand**: 인증 상태 관리 확장
- **React Router**: 권한 기반 라우팅
- **Tailwind CSS**: 일관된 디자인

## 8. 데이터 마이그레이션

### 기존 데이터 처리
- 현재 로컬 스토리지의 학습 데이터를 첫 번째 사용자 계정으로 이전
- 기존 사용자를 위한 자동 계정 생성 옵션 제공

### 다중 사용자 지원
- 사용자별 독립적인 학습 데이터 관리
- 사용자 전환 시 데이터 격리

이 설계를 바탕으로 단계별로 구현하여 완전한 사용자 관리 시스템을 구축하겠습니다.

